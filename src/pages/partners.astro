---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import Button from "../components/ui/Button.astro";
import { CheckCircle, BarChart3, ShieldCheck, Users } from "lucide-react";

const title = "Join the Ethyl Merc Collective";
const description = "Scale your trade business without the admin headaches. Join New Zealand's fastest-growing trade collective.";

const benefits = [
  {
    title: "Consistent Workflow",
    description: "Access a steady stream of commercial and residential jobs without spending a cent on marketing.",
    icon: BarChart3
  },
  {
    title: "Centralized Admin",
    description: "We handle the scheduling, invoicing, and client communication. You just focus on the tools.",
    icon: ShieldCheck
  },
  {
    title: "Grow Your Brand",
    description: "Operate under a trusted nationwide banner while maintaining your local ownership.",
    icon: Users
  }
];

const process = [
  {
    step: "01",
    title: "Apply Online",
    description: "Fill out our simple application form with your business details and trade qualifications."
  },
  {
    step: "02",
    title: "Vetting & Onboarding",
    description: "We verify your credentials, H&S compliance, and insurance. Once approved, you get access to our job dashboard."
  },
  {
    step: "03",
    title: "Start Receiving Jobs",
    description: "Accept jobs in your area that fit your schedule. Get paid on time, every time."
  }
];
---

<Layout title={title} description={description}>
  <Hero 
    title="Scale Your Business. Keep Your Freedom." 
    subtitle="Join a nationwide collective of elite tradespeople. We handle the admin, you handle the work."
    image="/images/partner-hero.jpg"
    primaryCtaText="Apply Now"
    primaryCtaLink="#apply"
    secondaryCtaText="How It Works"
    secondaryCtaLink="#process"
  />

  <section id="benefits" class="py-20 container mx-auto px-4">
    <div class="text-center max-w-3xl mx-auto mb-16">
       <span class="text-accent font-bold tracking-widest uppercase text-sm mb-2 block">Why Join EMG?</span>
       <h2 class="text-3xl md:text-4xl font-heading font-bold text-primary mb-6">Focus on What You Do Best</h2>
       <p class="text-lg text-slate-600">
         Running a trade business is hard. We remove the bottlenecks—marketing, admin, and cashflow—so you can focus on the craft.
       </p>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
       {benefits.map((benefit) => (
          <div class="p-8 bg-white border border-slate-200 rounded-2xl hover:border-accent hover:shadow-lg transition-all text-center group">
             <div class="w-16 h-16 bg-neutral-light rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-accent group-hover:text-white transition-colors">
                <benefit.icon className="w-8 h-8" />
             </div>
             <h3 class="text-xl font-heading font-bold text-primary mb-4">{benefit.title}</h3>
             <p class="text-slate-600">{benefit.description}</p>
          </div>
       ))}
    </div>
  </section>

  <section id="process" class="py-20 bg-primary text-white">
     <div class="container mx-auto px-4">
        <div class="grid lg:grid-cols-2 gap-16 items-center">
           <div>
              <h2 class="text-3xl md:text-4xl font-heading font-bold mb-8">How It Works</h2>
              <div class="space-y-12">
                 {process.map((step) => (
                    <div class="flex gap-6">
                       <span class="text-5xl font-heading font-bold text-white/10">{step.step}</span>
                       <div>
                          <h3 class="text-xl font-bold mb-2 text-accent">{step.title}</h3>
                          <p class="text-slate-300 leading-relaxed">{step.description}</p>
                       </div>
                    </div>
                 ))}
              </div>
           </div>
           <div class="bg-white/5 p-8 rounded-2xl border border-white/10 backdrop-blur-sm">
              <h3 class="text-2xl font-bold mb-6">Prerequisites</h3>
              <ul class="space-y-4 text-slate-300">
                 <li class="flex items-center gap-3">
                    <CheckCircle className="w-5 h-5 text-accent" />
                    <span>Valid Trade Qualification / License</span>
                 </li>
                 <li class="flex items-center gap-3">
                    <CheckCircle className="w-5 h-5 text-accent" />
                    <span>Public Liability Insurance ($2M+)</span>
                 </li>
                 <li class="flex items-center gap-3">
                    <CheckCircle className="w-5 h-5 text-accent" />
                    <span>Health & Safety Policy</span>
                 </li>
                 <li class="flex items-center gap-3">
                    <CheckCircle className="w-5 h-5 text-accent" />
                    <span>Clean Track Record</span>
                 </li>
              </ul>
              <div class="mt-8">
                <Button href="#apply" size="lg" class="w-full">Start Application</Button>
              </div>
           </div>
        </div>
     </div>
  </section>

  <section id="apply" class="py-20 bg-slate-50">
     <div class="container mx-auto px-4 max-w-3xl">
        <div class="bg-white p-8 md:p-12 rounded-2xl border border-slate-200 shadow-xl">
           <div class="text-center mb-10">
              <h2 class="text-3xl font-heading font-bold text-primary mb-4">Join the Collective</h2>
              <p class="text-slate-600">Complete the form below to register your interest. Our partner manager will be in touch within 48 hours.</p>
           </div>
           
           <div id="apply-success" class="hidden text-center py-10">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-primary mb-2">Application Received!</h3>
              <p class="text-slate-600">Thanks for applying. Our partner manager will be in touch within 48 hours.</p>
           </div>

           <form
             id="partner-form"
             name="partner-application"
             method="POST"
             data-netlify="true"
             netlify-honeypot="bot-field"
             class="space-y-6"
           >
              <input type="hidden" name="form-name" value="partner-application" />
              <p class="hidden"><label>Don't fill this out: <input name="bot-field" /></label></p>

              <div class="grid md:grid-cols-2 gap-6">
                 <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Business Name</label>
                    <input type="text" name="business-name" class="w-full h-11 px-4 border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-accent" />
                 </div>
                 <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Trade Type</label>
                    <select name="trade-type" class="w-full h-11 px-4 border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-accent bg-white">
                       <option>Plumbing & Gas</option>
                       <option>Electrical</option>
                       <option>Building / Carpentry</option>
                       <option>Roofing</option>
                       <option>HVAC</option>
                       <option>Other</option>
                    </select>
                 </div>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6">
                 <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Contact Name</label>
                    <input type="text" name="contact-name" class="w-full h-11 px-4 border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-accent" />
                 </div>
                 <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">Phone Number</label>
                    <input type="tel" name="phone" class="w-full h-11 px-4 border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-accent" />
                 </div>
              </div>

              <div>
                 <label class="block text-sm font-bold text-slate-700 mb-2">Email Address</label>
                 <input type="email" name="email" class="w-full h-11 px-4 border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-accent" />
              </div>

              <div>
                 <label class="block text-sm font-bold text-slate-700 mb-2">Primary Service Area</label>
                 <input type="text" name="service-area" placeholder="e.g. South Auckland, North Shore" class="w-full h-11 px-4 border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-accent" />
              </div>

              <div class="pt-4">
                 <Button type="submit" size="lg" class="w-full font-bold">Submit Application</Button>
              </div>
           </form>

           <script>
             const form = document.getElementById('partner-form') as HTMLFormElement;
             const success = document.getElementById('apply-success');
             form?.addEventListener('submit', async (e) => {
               e.preventDefault();
               const data = new FormData(form);
               await fetch('/', { method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' }, body: new URLSearchParams(data as any).toString() });
               form.classList.add('hidden');
               success?.classList.remove('hidden');
             });
           </script>
        </div>
     </div>
  </section>
</Layout>
